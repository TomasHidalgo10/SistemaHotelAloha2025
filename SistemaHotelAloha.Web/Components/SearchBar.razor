@using SistemaHotelAloha.Web.Services

<div class="searchbar card">
    <input placeholder="Destino" @bind="Destino" />
    <input type="date" @bind="CheckInStr" />
    <input type="date" @bind="CheckOutStr" />
    <input type="number" min="1" @bind="Adultos" />
    <input type="number" min="0" @bind="Ninos" />
    <button @onclick="Buscar">Buscar</button>
</div>

@code{
    [Parameter] public EventCallback<BusquedaRequest> OnBuscar { get; set; }

    public string Destino { get; set; } = "";
    public string? CheckInStr { get; set; }
    public string? CheckOutStr { get; set; }
    public int Adultos { get; set; } = 2;
    public int Ninos { get; set; } = 0;

    async Task Buscar()
    {
        DateOnly? ci = string.IsNullOrWhiteSpace(CheckInStr) ? null : DateOnly.Parse(CheckInStr);
        DateOnly? co = string.IsNullOrWhiteSpace(CheckOutStr) ? null : DateOnly.Parse(CheckOutStr);
        await OnBuscar.InvokeAsync(new BusquedaRequest(Destino, ci, co, Adultos, Ninos));
    }
}
