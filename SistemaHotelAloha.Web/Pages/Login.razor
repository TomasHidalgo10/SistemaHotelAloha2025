@page "/login"
@inject AuthService Auth
@inject NavigationManager Nav

<h3>Ingresar</h3>
<div class="card">
    <label>Usuario</label>
    <input @bind="userName" />
    <label>Contrase√±a</label>
    <input type="password" @bind="password" />
    <button @onclick="OnLogin">Entrar</button>
    @if (!string.IsNullOrEmpty(error)) { <p class="error">@error</p> }
</div>

@code {
    string userName = string.Empty;
    string password = string.Empty;
    string? error;

    async Task OnLogin()
    {
        error = null;
        var (ok, err) = await Auth.LoginAsync(userName, password);
        if (ok) Nav.NavigateTo("/");
        else error = err;
    }
}
